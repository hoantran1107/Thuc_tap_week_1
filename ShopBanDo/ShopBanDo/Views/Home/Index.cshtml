@model ShopBanDo.ModelView.HomeViewVM
@{
    ViewData["Title"] = "Shop";
    Layout = "~/Views/Shared/_Layout.cshtml";
    List<Product> allproduct = ViewBag.AllProducts;
}
<!-- Hero Section Begin -->
<section class="hero">
    <div class="hero__slider owl-carousel">
        <div class="hero__items set-bg" data-setbg="/Customerassets/img/hero/hero-1.jpg">
            <div class="container">
                <div class="row">
                    <div class="col-xl-5 col-lg-7 col-md-8">
                        <div class="hero__text">
                            <h6>Summer Collection</h6>
                            <h2>Fall - Winter Collections 2030</h2>
                            <p>
                                A specialist label creating luxury essentials. Ethically crafted with an unwavering
                                commitment to exceptional quality.
                            </p>
                            <a href="/shop-product" class="primary-btn">Shop now <span class="arrow_right"></span></a>
                            <div class="hero__social">
                                <a href="#"><i class="fa fa-facebook"></i></a>
                                <a href="#"><i class="fa fa-twitter"></i></a>
                                <a href="#"><i class="fa fa-pinterest"></i></a>
                                <a href="#"><i class="fa fa-instagram"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="hero__items set-bg" data-setbg="/Customerassets/img/hero/hero-2.jpg">
            <div class="container">
                <div class="row">
                    <div class="col-xl-5 col-lg-7 col-md-8">
                        <div class="hero__text">
                            <h6>Summer Collection</h6>
                            <h2>Fall - Winter Collections 2030</h2>
                            <p>
                                A specialist label creating luxury essentials. Ethically crafted with an unwavering
                                commitment to exceptional quality.
                            </p>
                            <a href="/shop-product" class="primary-btn">Shop now <span class="arrow_right"></span></a>
                            <div class="hero__social">
                                <a href="#"><i class="fa fa-facebook"></i></a>
                                <a href="#"><i class="fa fa-twitter"></i></a>
                                <a href="#"><i class="fa fa-pinterest"></i></a>
                                <a href="#"><i class="fa fa-instagram"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Hero Section End -->
<!-- Banner Section Begin -->
<section class="banner spad">
    <div class="container">
        <div class="row">
            <div class="col-lg-7 offset-lg-4">
                <div class="banner__item">
                    <div class="banner__item__pic">
                        <img src="/Customerassets/img/banner/banner-1.jpg" />
                    </div>
                    <div class="banner__item__text">
                        <h2>Clothing Collections 2030</h2>
                        <a href="/shop-product">Shop now</a>
                    </div>
                </div>
            </div>
            <div class="col-lg-5">
                <div class="banner__item banner__item--middle">
                    <div class="banner__item__pic">
                        <img src="/Customerassets/img/banner/banner-2.jpg" />
                    </div>
                    <div class="banner__item__text">
                        <h2>Accessories</h2>
                        <a href="/shop-product">Shop now</a>
                    </div>
                </div>
            </div>
            <div class="col-lg-7">
                <div class="banner__item banner__item--last">
                    <div class="banner__item__pic">
                        <img src="/Customerassets/img/banner/banner-3.jpg" />
                    </div>
                    <div class="banner__item__text">
                        <h2>Shoes Spring 2030</h2>
                        <a href="/shop-product">Shop now</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Banner Section End -->
<!-- Product Section Begin -->
<section class="product spad">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <ul class="filter__controls">
                    @*<li class="active mixitup-control-active" data-filter="*">Best Sellers</li>*@
                    <li data-filter=".all-product" class="">All product</li>
                    @*<li data-filter=".new-arrivals" class="">New Arrivals</li>
                    <li data-filter=".hot-sales" class="">Hot Sales</li>*@
                    @foreach (var item in Model.Products)
                    {
                        string a = "." + item.category.Alias;
                        <li data-filter="@a" class="">@item.category.CatName</li>
                    }
                </ul>
            </div>
        </div>
        <div class="row product__filter">
            @foreach (var item in allproduct)
            {
                string url = $"/{item.Alias}-{item.ProductId}";
                <div class="col-lg-3 col-md-6 col-sm-6 col-md-6 col-sm-6 mix all-product">
                    <div class="product__item">
                        <div class="product__item__pic set-bg" data-setbg="/images/products/@item.Thumb">
                            <ul class="product__hover">
                                <li><a href="#"><img src="/Customerassets/img/icon/heart.png" /></a></li>
                                <li><a href="#"><img src="/Customerassets/img/icon/compare.png" /> <span>Compare</span></a></li>

                                <li><a href="@url"><img src="/Customerassets/img/icon/search.png" /></a>Product details</li>
                            </ul>
                        </div>
                        <div class="product__item__text">
                            @if (item.UnitslnStock.Value > 0)
                            {
                                <h6>@item.ProductName</h6>
                                <a id="@item.ProductId" onclick="" class="add-to-cart">+ Add To Cart</a>
                            }
                            else
                            {
                                <h6 class="text-muted">@item.ProductName - Out of Stock</h6>
                            }
                            <div class="rating">
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star-o"></i>
                            </div>
                            <h5>@item.Price</h5>
                            <div class="product__color__select">
                                <label for="pc-7">
                                    <input type="radio" id="pc-7">
                                </label>
                                <label class="active black" for="pc-8">
                                    <input type="radio" id="pc-8">
                                </label>
                                <label class="grey" for="pc-9">
                                    <input type="radio" id="pc-9">
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            }

            @foreach (var item in Model.Products)
            {
                foreach (var item2 in item.lsProducts)
                {
                    string url = $"/{item2.Alias}-{item2.ProductId}";
                    <div class="col-lg-3 col-md-6 col-sm-6 col-md-6 col-sm-6 mix @item.category.Alias">
                        <div class="product__item">
                            <div class="product__item__pic set-bg" data-setbg="/images/products/@item2.Thumb">
                                <ul class="product__hover">
                                    <li><a href="#"><img src="/Customerassets/img/icon/heart.png" /></a></li>
                                    <li><a href="#"><img src="/Customerassets/img/icon/compare.png" /> <span>Compare</span></a></li>

                                    <li><a href="@url"><img src="/Customerassets/img/icon/search.png" /></a>Order details</li>
                                </ul>
                            </div>
                            <div class="product__item__text">
                                @if (item2.UnitslnStock.Value > 0)
                                {
                                    <h6>@item2.ProductName</h6>
                                    <a id="@item2.ProductId" onclick="" class="add-to-cart">+ Add To Cart</a>
                                }
                                else
                                {
                                    <h6 class="text-muted">@item2.ProductName - Out of Stock</h6>
                                }
                                <div class="rating">
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star-o"></i>
                                </div>
                                <h5>@item2.Price</h5>
                                <div class="product__color__select">
                                    <label for="pc-7">
                                        <input type="radio" id="pc-7">
                                    </label>
                                    <label class="active black" for="pc-8">
                                        <input type="radio" id="pc-8">
                                    </label>
                                    <label class="grey" for="pc-9">
                                        <input type="radio" id="pc-9">
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                }
            }
        </div>
    </div>
</section>
<!-- Product Section End -->
<!-- Latest Blog Section Begin -->
<section class="latest spad">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="section-title">
                    <span>News</span>
                    <h2>Fashion New Trends</h2>
                </div>
            </div>
        </div>
        <div class="row">
            @if (Model.TinTucs != null)
            {
                foreach (var item in Model.TinTucs)
                {
                    string url = $"/news/{item.Alias}-{item.PostId}";
                    <div class="col-lg-4 col-md-6 col-sm-6">
                        <div class="blog__item">
                            <div class="blog__item__pic set-bg" data-setbg="/images/news/@item.Thumb"></div>
                            <div class="blog__item__text">
                                <span><img src="/Customerassets/img/icon/calendar.png" /> 16 February 2020</span>
                                <h5>@item.Title</h5>
                                <a href="@url">More</a>
                            </div>
                        </div>
                    </div>
                }
            }

            @*    <div class="col-lg-4 col-md-6 col-sm-6">
                    <div class="blog__item">
                        <div class="blog__item__pic set-bg" data-setbg="/Customerassets/img/blog/blog-2.jpg"></div>
                        <div class="blog__item__text">
                            <span><img src="/Customerassets/img/icon/calendar.png" /> 21 February 2020</span>
                            <h5>Eternity Bands Do Last Forever</h5>
                            <a href="#">Read More</a>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6 col-sm-6">
                    <div class="blog__item">
                        <div class="blog__item__pic set-bg" data-setbg="/Customerassets/img/blog/blog-3.jpg"></div>
                        <div class="blog__item__text">
                            <span><img src="/Customerassets/img/icon/calendar.png" /> 28 February 2020</span>
                            <h5>The Health Benefits Of Sunglasses</h5>
                            <a href="#">Read More</a>
                        </div>
                    </div>
                </div>*@
        </div>
    </div>
</section>
<!-- Latest Blog Section End -->
@section Scripts{
    <script>
        $(document).ready(function () {
            $(function () {
                $(".add-to-cart").click(function () {
                    var productid = this.id;
                    var soLuong = "1";
                    $.ajax({
                        url: '/api/cart/add',
                        type: "POST",
                        dataType: "JSON",
                        data: {
                            productID: productid,
                            amount: soLuong
                        },
                        success: function (response) {
                            if (response.result == 'Redirect') {
                                window.location = response.url;
                            }
                            else {
                                loadHeaderCart(); //Add Product success
                                location.reload();
                            }
                            console.log(response); // log to the console to see whether it worked
                        },
                        error: function (error) {
                            alert("There was an error posting the data to the server: " + error.responseText);
                        }
                    });
                });

        @*$(".removecart").click(function () {
                var productid = $(this).attr("data-productid");
                $.ajax({
                url: "api/cart/remove",
                type: "POST",
                dataType: "JSON",
                data: { productID: productid },
                success: function (result) {
                if (result.success) {
                loadHeaderCart();//Reload lai gio hang
                location.reload();
                }
                },
                error: function (rs) {
                alert("Remove Cart Error !")
                }
                });
                });*@
                        });
            function loadHeaderCart() {
                $('#miniCart').load("/AjaxContent/HeaderCart");
                $('#numberCart').load("/AjaxContent/NumberCart");
            }
        });
    </script>
}